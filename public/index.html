<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Ranking</title>
		<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
		<link rel="stylesheet" href="css/bootstrap.css">
		<script src="js/jquery-1.11.2.js"></script>
		<script src="js/angular.min.js"></script>
		<script src="js/bootstrap.js"></script>
		<script src="js/angular-resource.min.js"></script>
		<script src="js/angular-route.min.js"></script>
		<script src="controller.js"></script>
		<link rel="stylesheet" href="css/style.css">
</head>

	<body ng-app="RankingApp" ng-controller="RankingController">

			<div ng-view>

			</div>

			 <div class="panel panel-default">

				<div class="panel-heading">
					<h3>Ranking</h3>
				</div>
				<div class="panel-body">

					<table class="table table-striped">

						<tr class="h4">
							<th width="5%"> </th>
							<th>
								Jogador
								<!-- <a ng-href="/#/players" class="btn btn-primary btn-xs">Adicionar</a> -->
							</th>
							<!-- <td align="center" width="10%">Jogos</td> -->
							<th style="text-align:center" align="center" width="10%">Pontos</th>
						</tr>
						
						<tr id="loadingplayers" ng-hide="listLoaded">
							<td colspan="4" align="center">
								<img src="img/ajax-loader.gif">
							</td>
						</tr>

						<tr ng-repeat="player in playerList | orderBy:['-points','name']" ng-click="filterPlayerMatches(player._id)">
							<td align="center"><strong>{{$index+1}}</strong></td>
							<td>
								<a href="">{{player.name}}</a>
							</td>
							<!-- <td align="center">{{getMatchCount(player._id)}}</td> -->
							<td align="center">{{player.points}}</td>
						</tr>

					</table>

				</div>
				
			</div>

			<div class="panel panel-default">
				
				<div id="matches" class="panel-heading">
					<h3>{{selectedPlayer.name}}</h3>
				</div>
				<div class="panel-body">
					
					<table class="table table-condensed" style="margin-bottom:5px" 
						ng-repeat="match in playerMatchList | orderBy:['-tourn_id','_id']" 
						ng-init="checkTournament(match)"
						ng-class="(match.victory) ? 'list-group-item-success' : (match.score.set_p1==match.score.set_p2) ? 'list-group-item-custom' : 'list-group-item-danger'">
						
						<tr ng-hide="match.sameTournament">
							<td colspan="4" style="background:#FFF;color:#000">
								 <strong>Torneio:</strong> {{getTournamentName(match.tourn_id)}}
							</td>
						<tr>
						<tr>
							<td width="10%" rowspan="2" style="text-align:center;vertical-align:middle">
								{{match.round}}
							</td>
							<td width="70%" style="vertical-align:middle" ng-class="(fullMatch.player1 == selectedPlayer.id) ? 'player-selected' : ''">
								<span ng-class="(match.victory) ? 'label-success' : (match.score.set_p1==match.score.set_p2) ? 'label-default' : 'label-danger'" 
								class="label">{{ (match.score.wo && (match.score.set_p1!=0)) ? "W" : match.score.set_p1 }}</span>
								{{getPlayerName(match.p1_id)}}
							</td>
							<td width="20%" align="right" style="vertical-align:middle">
								<span ng-repeat="game in match.score.games" class="label label-default" style="margin-right:5px">{{game.game_p1}}</span>
							</td>
						</tr>
						<tr>
							<td style="vertical-align:middle" ng-class="(fullMatch.player2 == selectedPlayer.id) ? 'player-selected' : ''">
								<span ng-class="(match.victory) ? 'label-success' : (match.score.set_p1==match.score.set_p2) ? 'label-default' : 'label-danger'" 
								class="label">{{ (match.score.wo && (match.score.set_p2!=0)) ? "W" : match.score.set_p2 }}</span>
								{{getPlayerName(match.p2_id)}}
							</td>
							<td align="right" style="vertical-align:middle">
								<span ng-repeat="game in match.score.games" class="label label-default" style="margin-right:5px">{{game.game_p2}}</span>
							</td>
						</tr>
						
					</table>
				</div>

			</div>

		 	<!-- <div class="panel panel-default">

				<div class="panel-heading">
					<h3>Torneios</h3>
				</div>
				<div class="panel-body">

					<table class="table table-striped">

						<tr class="h4">
							<td>Torneio</td>
							<td align="center" width="10%"></td>
						</tr>
						
						<tr id="loadingtournaments" ng-hide="listLoaded">
							<td colspan="4" align="center">
								<img src="img/ajax-loader.gif">
							</td>
						</tr>

						<tr ng-repeat="tourn in tournList | orderBy:'-_id'">
							<td>
								{{tourn.name}}
							</td>
							<td align="right">
								<a ng-href="/#/matches/{{tourn._id}}" class="btn btn-primary btn-xs">
									Adicionar partida
								</a>
							</td>
						</tr>

					</table>

				</div>
				
			</div> -->

	</body>
</html>
